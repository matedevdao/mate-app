{"version":3,"file":"chatroom.js","sourceRoot":"","sources":["../../../src/views/authenticated/chatroom.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,EAAE,EAAE,MAAM,aAAa,CAAC;AAGjC,OAAO,EAAE,YAAY,EAAE,MAAM,6BAA6B,CAAC;AAC3D,OAAO,EAAE,mBAAmB,EAAE,MAAM,2BAA2B,CAAC;AAEhE,SAAS,YAAY;IACnB,MAAM,KAAK,GAAG,YAAY,CAAC,QAAQ,EAAE,CAAC;IACtC,IAAI,CAAC,KAAK;QAAE,OAAO,SAAS,CAAC;IAC7B,IAAI,CAAC;QACH,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAC5D,OAAO,OAAO,CAAC,GAAG,IAAI,SAAS,CAAC;IAClC,CAAC;IAAC,MAAM,CAAC;QACP,OAAO,SAAS,CAAC;IACnB,CAAC;AACH,CAAC;AAED,SAAS,kBAAkB,CAAC,MAAc,EAAE,MAAc;IACxD,MAAM,IAAI,GAAG,EAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,uCAAuC,EAAE,EAAE;QAC7E,KAAK,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE;KAC1B,CAAC,CAAC;IAEH,yCAAyC;IACzC,MAAM,IAAI,GAAG,mBAAmB,CAAC;QAC/B,MAAM;QACN,SAAS,EAAE,YAAY,EAAE;KAC1B,CAAC,CAAC;IAEH,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAErB,OAAO;QACL,EAAE,EAAE,IAAI;QACR,MAAM;YACJ,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC;KACF,CAAC;AACJ,CAAC;AAED,OAAO,EAAE,kBAAkB,EAAE,CAAC","sourcesContent":["import { el } from '@webtaku/el';\nimport Navigo from 'navigo';\nimport { View } from '../view';\nimport { tokenManager } from '@gaiaprotocol/client-common';\nimport { createChatComponent } from '@gaiaprotocol/chat-client';\n\nfunction getMyAccount(): string {\n  const token = tokenManager.getToken();\n  if (!token) return 'unknown';\n  try {\n    const payload = JSON.parse(atob(token.split('.')[1] || ''));\n    return payload.sub || 'unknown';\n  } catch {\n    return 'unknown';\n  }\n}\n\nfunction createChatRoomView(router: Navigo, roomId: string): View {\n  const page = el('div', { className: 'page flex flex-col h-screen p-4 gap-2' }, {\n    style: { height: '100%' }\n  });\n\n  /* ---------- ChatComponent ---------- */\n  const chat = createChatComponent({\n    roomId,\n    myAccount: getMyAccount(),\n  });\n\n  page.append(chat.el);\n\n  return {\n    el: page,\n    remove() {\n      chat.remove();\n      page.remove();\n    },\n  };\n}\n\nexport { createChatRoomView };\n"]}